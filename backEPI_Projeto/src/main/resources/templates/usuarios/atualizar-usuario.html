<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SecurityHub</title>

    <link rel="icon" type="image/png" sizes="32x32" th:href="@{/imagem/favicon-32x32.png}">
    <link rel="icon" type="image/png" sizes="16x16" th:href="@{/imagem/favicon-16x16.png}">
    <link rel="apple-touch-icon" sizes="180x180" th:href="@{/imagem/apple-touch-icon.png}">
    <link rel="shortcut icon" type="image/x-icon" th:href="@{/imagem/favicon.ico}">
    <link rel="manifest" th:href="@{/imagem/site.webmanifest}">

    <link rel="stylesheet" th:href="@{/css/animacao.css}" />
    <link rel="stylesheet" th:href="@{/css/cadastro-usuario.css}" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
</head>

<body>

<section>
    <div class="container">

        <section class="card-cadastro" data-aos="flip-left"
                 data-aos-easing="ease-out-cubic"
                 data-aos-duration="2000">

            <a th:href="@{/usuarios/gerenciar}" class="voltar-seta fadeInUp" aria-label="Voltar">⮜</a>

            <h1 class="titulo-cadastro fadeInUp">Editar usuário</h1>

            <form id="formCadastro" class="formulario-usuario fadeInUp" th:action="@{/usuarios/atualizar}" method="post" th:object="${user}">

                <input type="hidden" th:field="*{id}" />

                <div class="campo-formulario">
                    <label for="nome">Nome</label>
                    <input type="text" name="nome" id="nome" th:field="*{nome}" required placeholder="Digite seu nome completo" />
                </div>

                <div class="campo-formulario">
                    <label for="email">Email</label>
                    <input type="email" name="email" id="email" th:field="*{username}" required placeholder="Digite um email válido" />
                </div>

                <div class="campo-formulario" style="position: relative;">
                    <label for="senha">Senha</label>
                    <input type="password" name="senha" id="senha" th:field="*{password}" placeholder="Informe sua senha (deixe em branco para não alterar)" />
                    <span id="toggleSenha" class="icone-olho"></span>
                </div>

                <div class="campo-formulario">
                    <label for="tipo">Tipo</label>
                    <select name="tipo" id="tipo" th:field="*{role}" required>
                        <option value="USUARIO">Usuário</option>
                        <option value="ADMIN">Admin</option>
                    </select>
                </div>

                <button type="submit" id="btnCadastrar" class="btn-submit">Atualizar</button>

                <div id="mensagem"></div>

                <div th:if="${mensagemSucesso}" class="alert alert-success mt-3" role="alert">
                    <p th:text="${mensagemSucesso}"></p>
                </div>
                <div th:if="${mensagemErro}" class="alert alert-danger mt-3" role="alert">
                    <p th:text="${mensagemErro}"></p>
                </div>

            </form>

        </section>
    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    AOS.init();
</script>
<script th:src="@{/js/cadastro.js}"></script>

</body>
</html>